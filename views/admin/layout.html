<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>{{ .Title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
    <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css" />
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
    <style>
        :root { color-scheme: light; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        #nprogress .bar { background: #2563eb !important; }
        /* 强制编辑器白色背景 */
        .EasyMDEContainer { background-color: #ffffff; }
        .CodeMirror { background-color: #ffffff; color: #333; }
    </style>
</head>
<body class="bg-gray-50 flex h-screen" hx-boost="true">

    <!-- 侧边栏 -->
    <aside class="w-64 bg-white border-r border-gray-200 flex flex-col">
        <div class="h-16 flex items-center px-6 font-bold text-xl tracking-tight">GoPress.</div>
        
        <nav class="flex-1 px-4 space-y-1 py-6">
            <!-- 仪表盘 -->
            <a href="/admin" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "dashboard"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                仪表盘
            </a>
            
            <!-- 内容管理 -->
            <a href="/admin/posts" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "posts"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                文章列表
            </a>
            <a href="/admin/pages" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "pages"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                独立页面
            </a>
            <a href="/admin/write" hx-boost="false" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "write"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                撰写文章
            </a>
            
            <!-- 系统设置 -->
            <div class="pt-6 pb-2 px-3 text-xs font-semibold text-gray-400 uppercase">系统</div>
            
            <a href="/admin/settings" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "settings"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                基本设置
            </a>
            <a href="/admin/appearance" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "appearance"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                网站外观
            </a>
            <a href="/admin/plugins" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition {{if eq .Active "plugins"}}bg-gray-100 text-black{{else}}text-gray-500 hover:bg-gray-50 hover:text-black{{end}}">
                插件管理
            </a>
        </nav>

        <div class="p-4 border-t border-gray-100">
            <a href="/admin/logout" hx-boost="false" class="block w-full text-left px-3 py-2 text-sm text-gray-500 hover:text-red-600 transition">退出登录</a>
        </div>
    </aside>

    <!-- 主内容区 -->
    <main class="flex-1 flex flex-col overflow-hidden">
        <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8">
            <h1 class="text-lg font-medium text-gray-800">{{ .Title }}</h1>
            <a href="/" target="_blank" class="text-sm text-blue-600 hover:underline">访问站点 ↗</a>
        </header>
        
        <div class="flex-1 overflow-y-auto p-8">
            <!-- 页面内容填充位 -->
            {{ embed }}
        </div>
    </main>

    <script>
        document.addEventListener("htmx:configRequest", () => NProgress.start());
        document.addEventListener("htmx:afterRequest", () => NProgress.done());
    </script>
</body>
</html>